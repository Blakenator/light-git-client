<div class="commit-wrapper"
     infinite-scroll
     [scrollWindow]="false"
     (scrolled)="scrolled(true)"
     (scrolledUp)="scrolled(false)">
  <table class="table table-striped">
    <thead>
    <tr>
      <th></th>
      <th>Message</th>
      <th>Author</th>
      <th class="d-none d-sm-table-cell">Email</th>
      <th>Date</th>
      <th>Hash</th>
      <th width="1%"></th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let c of commitHistory | slice : 0 : scrollOffset+numPerPage" class="commit-row">
      <td class="position-relative p-0">
        <app-git-graph-canvas [commit]="c"></app-git-graph-canvas>
        <div [style.width]="getSpacerList(c).length*14+'px'">
          <div class="position-absolute graph-spacer"
               [style.left]="i*14+'px'"
               [style.borderRightColor]="getColor(block.branchIndex)"
               *ngFor="let block of getSpacerList(c); let i= index">
            <i class="fa fa-circle commit-indicator" *ngIf="block.isCommit"></i>
          </div>
        </div>
      </td>
      <td class="commit-message-cell">
        <div class="vertical-content-hidden">
          <div [ngClass]="{'badge ml-1':true,'badge-info':!tag.startsWith('tag: ')&&!tag.startsWith('origin/'),'badge-warning':tag.startsWith('tag: '),'badge-primary':tag.startsWith('origin/')}"
               *ngFor="let tag of c.currentTags">
            <small *ngIf="tag.startsWith('origin/')"><i class="fa fa-cloud"></i></small>
            {{tag.replace('tag: ', '')}}
          </div>
          {{c.message}}
        </div>
      </td>
      <td class="hidden-until-hover" [title]="c.authorName">{{c.authorName}}</td>
      <td class="hidden-until-hover d-none d-sm-table-cell" [title]="c.authorEmail">{{c.authorEmail}}</td>
      <td class="hidden-until-hover" [title]="c.authorDate | date : 'full'">
        {{c.authorDate | date : 'short'}}
      </td>
      <td class="hidden-until-hover" [title]="c.hash">{{c.hash.substr(0, 8)}}</td>
      <td>
        <button class="btn btn-sm btn-outline-warning" title="View Commit Diff" (click)="getCommitDiff(c)">
          <i class="fa fa-eye"></i>
        </button>
      </td>
    </tr>
    </tbody>
  </table>
</div>
